<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">javascript/Events.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
</head>
<body class="layout-container">

<header>
  <a href="./">Home</a>
  <a href="identifiers.html">Identifier</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div data-ice="classWrap">
  <h2>Class</h2>
  <ul>
    
  <li data-ice="classDoc"><span><a href="class/javascript/Buffer.js~Buffer.html">Buffer</a></span></li>
<li data-ice="classDoc"><span><a href="class/javascript/Event.js~Event.html">Event</a></span></li>
<li data-ice="classDoc"><span><a href="class/javascript/Events.js~Events.html">Events</a></span></li>
<li data-ice="classDoc"><span><a href="class/javascript/FileSystem.js~FileSystem.html">FileSystem</a></span></li>
<li data-ice="classDoc"><span><a href="class/javascript/SAMP/Player.js~Player.html">Player</a></span></li>
<li data-ice="classDoc"><span><a href="class/javascript/SAMP/Players.js~Players.html">Players</a></span></li>
</ul>
</div>



<div data-ice="functionWrap">
  <h2><a href="function/">Function</a></h2>
  <ul>
    
  <li data-ice="functionDoc"><span><a href="function/index.html#static-function-AddMenuItem">AddMenuItem</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-AddPlayerClass">AddPlayerClass</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-AddPlayerClassEx">AddPlayerClassEx</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-AddStaticPickup">AddStaticPickup</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-AddStaticVehicle">AddStaticVehicle</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-AddStaticVehicleEx">AddStaticVehicleEx</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-AllowInteriorWeapons">AllowInteriorWeapons</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-Attach3DTextLabelToPlayer">Attach3DTextLabelToPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-Attach3DTextLabelToVehicle">Attach3DTextLabelToVehicle</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-Ban">Ban</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-BanEx">BanEx</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-BlockIpAddress">BlockIpAddress</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-CallLocalFunction">CallLocalFunction</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-CallRemoteFunction">CallRemoteFunction</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-ConnectNPC">ConnectNPC</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-Create3DTextLabel">Create3DTextLabel</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-CreateExplosion">CreateExplosion</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-CreateMenu">CreateMenu</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-CreatePickup">CreatePickup</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-CreatePlayer3DTextLabel">CreatePlayer3DTextLabel</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-Delete3DTextLabel">Delete3DTextLabel</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-DeletePlayer3DTextLabel">DeletePlayer3DTextLabel</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-DestroyMenu">DestroyMenu</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-DestroyPickup">DestroyPickup</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-DisableMenu">DisableMenu</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-DisableMenuRow">DisableMenuRow</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-EnableTirePopping">EnableTirePopping</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-EnableZoneNames">EnableZoneNames</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GameTextForAll">GameTextForAll</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GameTextForPlayer">GameTextForPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneCreate">GangZoneCreate</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneDestroy">GangZoneDestroy</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneFlashForAll">GangZoneFlashForAll</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneFlashForPlayer">GangZoneFlashForPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneHideForAll">GangZoneHideForAll</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneHideForPlayer">GangZoneHideForPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneShowForAll">GangZoneShowForAll</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneShowForPlayer">GangZoneShowForPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneStopFlashForAll">GangZoneStopFlashForAll</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GangZoneStopFlashForPlayer">GangZoneStopFlashForPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GetNetworkStats">GetNetworkStats</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GetPlayerMenu">GetPlayerMenu</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GetPlayerNetworkStats">GetPlayerNetworkStats</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GetPlayerVersion">GetPlayerVersion</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GetServerVarAsBool">GetServerVarAsBool</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GetServerVarAsInt">GetServerVarAsInt</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GetServerVarAsString">GetServerVarAsString</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-GetWeaponName">GetWeaponName</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-HideMenuForPlayer">HideMenuForPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-IsPlayerAdmin">IsPlayerAdmin</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-IsPlayerNPC">IsPlayerNPC</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-IsValidMenu">IsValidMenu</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-Kick">Kick</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-KillTimer">KillTimer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-LimitGlobalChatRadius">LimitGlobalChatRadius</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-LimitPlayerMarkerRadius">LimitPlayerMarkerRadius</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-NetStats_BytesReceived">NetStats_BytesReceived</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-NetStats_BytesSent">NetStats_BytesSent</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-NetStats_ConnectionStatus">NetStats_ConnectionStatus</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-NetStats_GetConnectedTime">NetStats_GetConnectedTime</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-NetStats_GetIpPort">NetStats_GetIpPort</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-NetStats_MessagesReceived">NetStats_MessagesReceived</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-NetStats_MessagesRecvPerSecond">NetStats_MessagesRecvPerSecond</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-NetStats_MessagesSent">NetStats_MessagesSent</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-NetStats_PacketLossPercent">NetStats_PacketLossPercent</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SendClientMessage">SendClientMessage</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SendClientMessageToAll">SendClientMessageToAll</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SendDeathMessage">SendDeathMessage</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SendDeathMessageToPlayer">SendDeathMessageToPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SendPlayerMessageToAll">SendPlayerMessageToAll</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SendPlayerMessageToPlayer">SendPlayerMessageToPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SendRconCommand">SendRconCommand</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SetDeathDropAmount">SetDeathDropAmount</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SetGameModeText">SetGameModeText</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SetGravity">SetGravity</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SetMenuColumnHeader">SetMenuColumnHeader</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SetNameTagDrawDistance">SetNameTagDrawDistance</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SetTeamCount">SetTeamCount</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SetTimerEx">SetTimerEx</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SetWeather">SetWeather</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-SetWorldTime">SetWorldTime</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-ShowMenuForPlayer">ShowMenuForPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-ShowNameTags">ShowNameTags</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-ShowPlayerDialog">ShowPlayerDialog</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-ShowPlayerMarkers">ShowPlayerMarkers</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawAlignment">TextDrawAlignment</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawBackgroundColor">TextDrawBackgroundColor</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawBoxColor">TextDrawBoxColor</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawColor">TextDrawColor</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawCreate">TextDrawCreate</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawDestroy">TextDrawDestroy</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawFont">TextDrawFont</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawHideForAll">TextDrawHideForAll</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawHideForPlayer">TextDrawHideForPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawLetterSize">TextDrawLetterSize</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawSetOutline">TextDrawSetOutline</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawSetPreviewModel">TextDrawSetPreviewModel</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawSetPreviewRot">TextDrawSetPreviewRot</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawSetPreviewVehCol">TextDrawSetPreviewVehCol</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawSetProportional">TextDrawSetProportional</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawSetSelectable">TextDrawSetSelectable</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawSetShadow">TextDrawSetShadow</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawSetString">TextDrawSetString</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawShowForAll">TextDrawShowForAll</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawShowForPlayer">TextDrawShowForPlayer</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawTextSize">TextDrawTextSize</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-TextDrawUseBox">TextDrawUseBox</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-UnBlockIpAddress">UnBlockIpAddress</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-Update3DTextLabelText">Update3DTextLabelText</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-UpdatePlayer3DTextLabelText">UpdatePlayer3DTextLabelText</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-VectorSize">VectorSize</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-acos">acos</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-asin">asin</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-atan">atan</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-atan2">atan2</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-format">format</a></span></li>
</ul>
</div>



<div data-ice="typedefWrap">
  <h2><a href="typedef/">Typedef</a></h2>
  <ul>
    
  <li data-ice="typedefDoc"><span><a href="typedef/index.html#static-typedef-ArrowKeys">ArrowKeys</a></span></li>
</ul>
</div>


</nav>

<div class="content" data-ice="content"><h1 data-ice="title">javascript/Events.js</h1>
<pre class="source-code line-number"><code class="prettyprint linenums" data-ice="content">/**
 * Events base class for subscribing to and firing events
 * 
 * @example 
 * class MyObject extends Events { };
 * $events = new MyObject();
 * $events.on(&quot;test&quot;,function);
 * $events.fire(&quot;test&quot;, args...);
 * $events.off(&quot;test&quot;, function);
 */
export class Events {
	/** Creates an events system | Should be extended */
	constructor(){
		/** @type {Object} */
		this.ids = {};
	}
	
/**
 * Subscribe to an event
 * @param {String}   event Event name
 * @param {Function} fn    Event callback
 */
	on(event, fn){
		this.addEvent(event,fn,-1);
	}

/**
 * Subscribe to an event and unsubscribe after it has been fired once
 * @param {String}   event Event name
 * @param {Function} fn    Event callback		
 */
	one(event,fn){
		this.addEvent(event,fn,0);
	}
/**
 * Subscribe to an event and unsubscribe after a set amount of times
 * @param {String}   event Event name
 * @param {Function} fn    Event callback
 * @param {Number}   times Times event can fire	
 */
	some(event,fn,times){
		this.addEvent(event,fn,times-1);
	}
	
/**
 * Unsubscribe from an event
 * @param {String}   event Event name
 * @param {Function} fn    Function/Callback used to subscribe
 */
	off(event,fn){
		if(this.ids[event])
			for(var id in this.ids[event])
				if(this.ids[event][id].fn == fn)
					delete this.ids[event][id];
	}
	
/**
 * Add an event
 * @param {String}   event Event name
 * @param {Function} fn    Event callback
 * @param {Number}   type  Event type (-1 infinite, 0 once, 0 &gt; times)
 */
	addEvent(event,fn,type){
		if(!this.ids[event])this.ids[event] = [];
		this.ids[event].push(new Event(event,fn,type));	
	}

/**
 * Fire an event
 * @param   {String}  event Event name
 * @returns {Boolean} Returning 0 will cancel the event bubble
 */
	fire( event ){
		var args = [];
		for(var i in arguments){
			if(i != 0) args.push(arguments[i]);
		}
		
		for(var id in this.ids[event]){
			var fn = this.ids[event][id].fn;
			var ret = fn.apply(null, args);	
			
			if(this.ids[event][id].type == 0) delete this.ids[event][id];
			else if(this.ids[event][id].type &gt; 0) this.ids[event][id].type--;

			// This is a special case for PlayerCommandText and RconCommand so it returns correctly
			if(event == &quot;PlayerCommandText&quot; || event == &quot;RconCommand&quot;){
				if(ret === 1){
					return 1;
				}
			} else {
				if(ret === 0){
					return 0;
				}
			}
		}
	}
};</code></pre>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.1.2)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
